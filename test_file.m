clc
clear all
   m1 = [-1.25 0.5 0];
   m2 = [-1.25 1.5 0];
   m3 = [-0.75 1 0];
   m4 = [-0.25 1.5  0];
   m5 = [-0.25 0.5 0];
   m6 = [0.25 1.5 0];
   m7 = [0.75 0.5 0];
   m8 = [0.5 1 0];
   m9 = [0 1 0];
   m10 = [0.76 0.5 0];
   m11 = [1.25 0.5 0];
   m12 = [0.755 0.5 0];
   m13 = [0.75 1.5 0];
   m14 = [1.25 1.5 0];
   m15 = [0.75 1 0];
   m16 = [1.25 1 0];
   m17 = [0.755 1 0];
 M = [[-1.25 0.5 0];[-1.25 1.5 0];[-0.75 1 0];[-0.25 1.5  0];
     [-0.25 0.5 0];[0.25 1.5 0];[0.75 0.5 0];[0.5 1 0];[0 1 0];
     [0.76 0.5 0];[1.25 0.5 0];[0.755 0.5 0];[0.75 1.5 0];[1.25 1.5 0];[0.75 1 0];[1.25 1 0];[0.755 1 0]];
mdl_planar2
Q = zeros(5,2);
hold on
plot_arrow(m1,m2,'b')
plot_arrow(m2,m3,'b')
plot_arrow(m3,m4,'b')
plot_arrow(m4,m5,'b')
plot_arrow(m5,m6,'g')
plot_arrow(m6,m7,'g')
plot_arrow(m7,m8,'g')
plot_arrow(m8,m9,'g')
plot_arrow(m7,m11,'g')
plot_arrow(m7,m13,'g')
plot_arrow(m13,m14,'g')
plot_arrow(m15,m16,'g')
hold off
for i = 1:16
    x = mtraj (@lspb, M(i,:),M(i+1,:),500)
    Px = x(i,1);
    Py = x(i,2);
    T = [1 0 0 Px; 0 1 0 Py; 0 0 1 0; 0 0 0 1]
    Q(i,:) = p2.ikine(T,'mask',[1 1 0 0 0 0])
    p2.plot(Q(i,:),'top')
end